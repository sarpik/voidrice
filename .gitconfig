# ~/.gitconfig
#	@author:	Kipras Melnikovas (kipras.org) <kipras@kipras.org>
#	@dotfiles:	https://github.com/kiprasmel/voidrice
#	@license:	GPL-3.0
#
#	@description:
#	This is Git's per-user configuration file.
#

[user]
	# @param username - custom, used for some aliases / scripts (& also my github/bitbucket username)
	username = kiprasmel
	name = Kipras Melnikovas
	email = kipras@kipras.org
	signingkey = AA505BC1C6D8AD90
[core]
	### editor is $EDITOR. I don't have it here since it won't expand and will interfere with scripts.
	# editor = '/usr/bin/env code' --new-window --wait
	autocrlf = input # `auto` for Windows, `input` for *nix. Read more @ https://stackoverflow.com/q/5834014/9285308
	safecrlf = false # Hides warning message but doesn't impact `autocrlf` functionality
	pager = diff-so-fancy | less --tabs=4 -RFX
	longpaths = true
[imap]
	host = mail.kipras.org
	user = kipras@kipras.org # todo - kipras@kipras.org
	port = 993
	sslverify = false
	folder = Drafts
[sendemail]
	smtpEncryption = tls
	smtpServer = mail.kipras.org
	smtpUser = kipras@kipras.org
	smtpServerPort = 587
[stash]
	## usebuiltin = no # see https://public-inbox.org/git/xmqqa79lbpte.fsf@gitster-ct.c.googlers.com/
[gpg]
	program = gpg2
[color]
	branch = auto
	diff = auto
	interactive = auto
	status = auto
	grep = auto
[commit]
	verbose = true
	gpgSign = true
[merge]
	ff = no
	tool = code
[rebase]
	missingCommitsCheck = warn
	#autostash = true # you cannot access it from the stash which sucks
[pull]
	rebase = true
	ff = yes
[push]
	followTags = true # see https://stackoverflow.com/a/26438076/9285308
[hub]
	protocol = ssh
[help]
	autoCorrect = 0
[diff]
	tool = default-difftool
	algorithm = histogram
[difftool "default-difftool"]
  cmd = code --wait --diff $LOCAL $REMOTE
[filter "lfs"]
	clean = git-lfs clean -- %f
	smudge = git-lfs smudge -- %f
	process = git-lfs filter-process
	required = true
[winUpdater]
	recentlySeenVersion = 2.21.0.windows.1

[alias]
	fn = "!f() { echo \"hi\"; }; f;"
	a = add
	ac = !git add . && git c
	aca = !git add . && git ca
	ad = add
	adc = !git add . && git c
	adca = !git add . && git ca
	adcaw = !git add . && git ca --no-edit
	adcawpf = !git adcaw && git push -f
	adcawpfn = !git adcaw && git push -f --no-verify # --no-verify to ignore husky's hooks
	adct = !git add . && git c -m "TEMP" --no-verify # --no-verify to ignore husky's hooks
	ap = add --patch
	b = branch
	ba = branch --all
	bd = delete-branch # git-extras
	bp = backup
	o = browse # hub
	backup = !git-backup # remote script, availabe @ github.com/kiprasmel/dotfiles/.local/bin/tools/git-backup
	# how many commits you're behind some other branch
	behind = !git-behind # remote script, available @ github.com/kiprasmel/dotfiles/.local/bin/tools/git-behind
	behind-remote = !git-behind-remote
	c = commit -S # -s # ~~Removed to avoid the 'signed-off-by', causing bots to not catch the reference~~
	ca = c --amend
	caw = c --amend --no-edit
	cawpf = !git c --amend --no-edit && git push -f
	cawpfn = !git c --amend --no-edit && git push -f --no-verify # --no-verify to ignore husky's hooks
	ct = c -m "TEMP"
	cgg = !git c -m "$(curl -Ls http://whatthecommit.com/index.txt)"
	gg = !git c -m "$(curl -Ls http://whatthecommit.com/index.txt)"
	cl = clone
	co = checkout
	cob = checkout -b
	#co = !git stash -u && git checkout
	cod = checkout dev
	com = checkout master
	#checkout = !git stash -u && command git "$@"
	cfg = config --global --edit
	cs = !clear && git status
	csl = !clear && git sl
	d = diff
	ds = diff --staged
	df = diff FETCH_HEAD
	e = exec
	exec = "!exec " # execute a script at the root of the repository!
	# this is super useful, for example,
	# `git exec sudo make install`!
	# See https://github.com/kiprasmel/git-backup/commit/b127ba68dffe7d6c84dc0ffc54bc810b3b9683ed
	#
	f = fetch
	fa = fetch --all
	#g =
	#h =
	#i =
	#j =
	#k =
	l = lg
	lg = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit
	lgs = lg --stat
	lp = log --patch #--follow
	#m = merge
	mf = merge --ff # I have `merge` set to `ff: no` (see above), so by default it's `merge --no-ff`. This is the opposite.
	#n =
	#o =
	p = push --follow-tags
	# pa = push --all # meh
	pl = pull
	pp = "!git push --set-upstream \"${1:-origin}\" \"HEAD\""
	pt = push --follow-tags # not `--tags` for a reason: https://stackoverflow.com/a/26438076/9285308
	ppr = pull-request # requires 'hub'
	dpr = pull-request -d
	prme =        pull-request --push -a kiprasmel  #--base        master  -epo                                                  # targets upstream TODO
	prmee =  !hub pull-request --push -a kiprasmel  --base kiprasmel:master  -epo --head kiprasmel:"$(git symbolic-ref --short HEAD)" # targets origin  (your repo)
	prmed =       pull-request --push -a kiprasmel  #--base        master -depo                                                  # targets upstream TODO
	prmeed = !hub pull-request --push -a kiprasmel  --base kiprasmel:master -depo --head kiprasmel:"$(git symbolic-ref --short HEAD)" # targets origin  (your repo)
	prmedw = !hub prmed --no-edit
	prmeedw = !hub prmeed --no-edit
	#prmeed = !git pull-request -a kiprasmel  --base "${$(git config --global --get user.username):-kiprasmel}":master -depo # targets local repo
	parent = !git show-branch | sed \"s/].*//\" | grep \"\\*\" | grep -v \"$(git rev-parse --abbrev-ref HEAD)\" | head -n1 | sed \"s/^.*\\[//\"
	#q =
	r = rebase
	rc = rebase --continue
	ri = rebase -i
	ra = rebase --abort
	rc = rebase --continue
	rom = rebase origin/master
	riom = rebase -i origin/master
	rmbp = rmbackup
	rmbackup = !git-rm-backup # remote script, availabe @ dotfiles/.scripts/tools/git-rm-backup
	s = status
	sa = status --untracked-files=all
	sb = show-branch
	sh = show HEAD
	shc = !git show HEAD | wc
	si = status --ignored=traditional
	sl = !git -c color.status=always status | less -R # https://stackoverflow.com/a/18304605
			# /\ the -c option is explained by `man git` @ 47
			# > Pass a configuration parameter to the command. The value given will override values from configuration files.
	so = show
	ss = show
	sh = show @
	sil = !git -c color.status=always status --ignored=traditional | less -R
	stash-unapply = !git stash show -p | git apply -Rc
	t = tag
	tt = tas
	tas = tag -a -s
	#u =
	#v =
	#w =
	#x =
	#y =
	#z =
